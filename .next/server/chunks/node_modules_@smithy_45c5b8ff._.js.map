{"version":3,"sources":["../../../node_modules/%40smithy/protocol-http/dist-es/httpResponse.js","../../../node_modules/%40smithy/is-array-buffer/dist-es/index.js","../../../node_modules/%40smithy/util-buffer-from/dist-es/index.js","../../../node_modules/%40smithy/util-base64/dist-es/fromBase64.js","../../../node_modules/%40smithy/util-utf8/dist-es/fromUtf8.js","../../../node_modules/%40smithy/util-base64/dist-es/toBase64.js","../../../node_modules/%40smithy/util-utf8/dist-es/toUtf8.js","../../../node_modules/%40smithy/protocol-http/dist-es/httpRequest.js","../../../node_modules/%40smithy/core/dist-es/submodules/serde/parse-utils.js","../../../node_modules/%40smithy/util-hex-encoding/dist-es/index.js","../../../node_modules/%40smithy/node-http-handler/dist-es/node-http-handler.js","../../../node_modules/%40smithy/util-uri-escape/dist-es/escape-uri.js","../../../node_modules/%40smithy/querystring-builder/dist-es/index.js","../../../node_modules/%40smithy/node-http-handler/dist-es/constants.js","../../../node_modules/%40smithy/node-http-handler/dist-es/get-transformed-headers.js","../../../node_modules/%40smithy/node-http-handler/dist-es/timing.js","../../../node_modules/%40smithy/node-http-handler/dist-es/set-connection-timeout.js","../../../node_modules/%40smithy/node-http-handler/dist-es/set-socket-keep-alive.js","../../../node_modules/%40smithy/node-http-handler/dist-es/set-socket-timeout.js","../../../node_modules/%40smithy/node-http-handler/dist-es/write-request-body.js","../../../node_modules/%40smithy/node-http-handler/dist-es/stream-collector/collector.js","../../../node_modules/%40smithy/node-http-handler/dist-es/stream-collector/index.js"],"sourcesContent":["export class HttpResponse {\n    statusCode;\n    reason;\n    headers;\n    body;\n    constructor(options) {\n        this.statusCode = options.statusCode;\n        this.reason = options.reason;\n        this.headers = options.headers || {};\n        this.body = options.body;\n    }\n    static isInstance(response) {\n        if (!response)\n            return false;\n        const resp = response;\n        return typeof resp.statusCode === \"number\" && typeof resp.headers === \"object\";\n    }\n}\n","export const isArrayBuffer = (arg) => (typeof ArrayBuffer === \"function\" && arg instanceof ArrayBuffer) ||\n    Object.prototype.toString.call(arg) === \"[object ArrayBuffer]\";\n","import { isArrayBuffer } from \"@smithy/is-array-buffer\";\nimport { Buffer } from \"buffer\";\nexport const fromArrayBuffer = (input, offset = 0, length = input.byteLength - offset) => {\n    if (!isArrayBuffer(input)) {\n        throw new TypeError(`The \"input\" argument must be ArrayBuffer. Received type ${typeof input} (${input})`);\n    }\n    return Buffer.from(input, offset, length);\n};\nexport const fromString = (input, encoding) => {\n    if (typeof input !== \"string\") {\n        throw new TypeError(`The \"input\" argument must be of type string. Received type ${typeof input} (${input})`);\n    }\n    return encoding ? Buffer.from(input, encoding) : Buffer.from(input);\n};\n","import { fromString } from \"@smithy/util-buffer-from\";\nconst BASE64_REGEX = /^[A-Za-z0-9+/]*={0,2}$/;\nexport const fromBase64 = (input) => {\n    if ((input.length * 3) % 4 !== 0) {\n        throw new TypeError(`Incorrect padding on base64 string.`);\n    }\n    if (!BASE64_REGEX.exec(input)) {\n        throw new TypeError(`Invalid base64 string.`);\n    }\n    const buffer = fromString(input, \"base64\");\n    return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n};\n","import { fromString } from \"@smithy/util-buffer-from\";\nexport const fromUtf8 = (input) => {\n    const buf = fromString(input, \"utf8\");\n    return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n};\n","import { fromArrayBuffer } from \"@smithy/util-buffer-from\";\nimport { fromUtf8 } from \"@smithy/util-utf8\";\nexport const toBase64 = (_input) => {\n    let input;\n    if (typeof _input === \"string\") {\n        input = fromUtf8(_input);\n    }\n    else {\n        input = _input;\n    }\n    if (typeof input !== \"object\" || typeof input.byteOffset !== \"number\" || typeof input.byteLength !== \"number\") {\n        throw new Error(\"@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.\");\n    }\n    return fromArrayBuffer(input.buffer, input.byteOffset, input.byteLength).toString(\"base64\");\n};\n","import { fromArrayBuffer } from \"@smithy/util-buffer-from\";\nexport const toUtf8 = (input) => {\n    if (typeof input === \"string\") {\n        return input;\n    }\n    if (typeof input !== \"object\" || typeof input.byteOffset !== \"number\" || typeof input.byteLength !== \"number\") {\n        throw new Error(\"@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.\");\n    }\n    return fromArrayBuffer(input.buffer, input.byteOffset, input.byteLength).toString(\"utf8\");\n};\n","export class HttpRequest {\n    method;\n    protocol;\n    hostname;\n    port;\n    path;\n    query;\n    headers;\n    username;\n    password;\n    fragment;\n    body;\n    constructor(options) {\n        this.method = options.method || \"GET\";\n        this.hostname = options.hostname || \"localhost\";\n        this.port = options.port;\n        this.query = options.query || {};\n        this.headers = options.headers || {};\n        this.body = options.body;\n        this.protocol = options.protocol\n            ? options.protocol.slice(-1) !== \":\"\n                ? `${options.protocol}:`\n                : options.protocol\n            : \"https:\";\n        this.path = options.path ? (options.path.charAt(0) !== \"/\" ? `/${options.path}` : options.path) : \"/\";\n        this.username = options.username;\n        this.password = options.password;\n        this.fragment = options.fragment;\n    }\n    static clone(request) {\n        const cloned = new HttpRequest({\n            ...request,\n            headers: { ...request.headers },\n        });\n        if (cloned.query) {\n            cloned.query = cloneQuery(cloned.query);\n        }\n        return cloned;\n    }\n    static isInstance(request) {\n        if (!request) {\n            return false;\n        }\n        const req = request;\n        return (\"method\" in req &&\n            \"protocol\" in req &&\n            \"hostname\" in req &&\n            \"path\" in req &&\n            typeof req[\"query\"] === \"object\" &&\n            typeof req[\"headers\"] === \"object\");\n    }\n    clone() {\n        return HttpRequest.clone(this);\n    }\n}\nfunction cloneQuery(query) {\n    return Object.keys(query).reduce((carry, paramName) => {\n        const param = query[paramName];\n        return {\n            ...carry,\n            [paramName]: Array.isArray(param) ? [...param] : param,\n        };\n    }, {});\n}\n","export const parseBoolean = (value) => {\n    switch (value) {\n        case \"true\":\n            return true;\n        case \"false\":\n            return false;\n        default:\n            throw new Error(`Unable to parse boolean value \"${value}\"`);\n    }\n};\nexport const expectBoolean = (value) => {\n    if (value === null || value === undefined) {\n        return undefined;\n    }\n    if (typeof value === \"number\") {\n        if (value === 0 || value === 1) {\n            logger.warn(stackTraceWarning(`Expected boolean, got ${typeof value}: ${value}`));\n        }\n        if (value === 0) {\n            return false;\n        }\n        if (value === 1) {\n            return true;\n        }\n    }\n    if (typeof value === \"string\") {\n        const lower = value.toLowerCase();\n        if (lower === \"false\" || lower === \"true\") {\n            logger.warn(stackTraceWarning(`Expected boolean, got ${typeof value}: ${value}`));\n        }\n        if (lower === \"false\") {\n            return false;\n        }\n        if (lower === \"true\") {\n            return true;\n        }\n    }\n    if (typeof value === \"boolean\") {\n        return value;\n    }\n    throw new TypeError(`Expected boolean, got ${typeof value}: ${value}`);\n};\nexport const expectNumber = (value) => {\n    if (value === null || value === undefined) {\n        return undefined;\n    }\n    if (typeof value === \"string\") {\n        const parsed = parseFloat(value);\n        if (!Number.isNaN(parsed)) {\n            if (String(parsed) !== String(value)) {\n                logger.warn(stackTraceWarning(`Expected number but observed string: ${value}`));\n            }\n            return parsed;\n        }\n    }\n    if (typeof value === \"number\") {\n        return value;\n    }\n    throw new TypeError(`Expected number, got ${typeof value}: ${value}`);\n};\nconst MAX_FLOAT = Math.ceil(2 ** 127 * (2 - 2 ** -23));\nexport const expectFloat32 = (value) => {\n    const expected = expectNumber(value);\n    if (expected !== undefined && !Number.isNaN(expected) && expected !== Infinity && expected !== -Infinity) {\n        if (Math.abs(expected) > MAX_FLOAT) {\n            throw new TypeError(`Expected 32-bit float, got ${value}`);\n        }\n    }\n    return expected;\n};\nexport const expectLong = (value) => {\n    if (value === null || value === undefined) {\n        return undefined;\n    }\n    if (Number.isInteger(value) && !Number.isNaN(value)) {\n        return value;\n    }\n    throw new TypeError(`Expected integer, got ${typeof value}: ${value}`);\n};\nexport const expectInt = expectLong;\nexport const expectInt32 = (value) => expectSizedInt(value, 32);\nexport const expectShort = (value) => expectSizedInt(value, 16);\nexport const expectByte = (value) => expectSizedInt(value, 8);\nconst expectSizedInt = (value, size) => {\n    const expected = expectLong(value);\n    if (expected !== undefined && castInt(expected, size) !== expected) {\n        throw new TypeError(`Expected ${size}-bit integer, got ${value}`);\n    }\n    return expected;\n};\nconst castInt = (value, size) => {\n    switch (size) {\n        case 32:\n            return Int32Array.of(value)[0];\n        case 16:\n            return Int16Array.of(value)[0];\n        case 8:\n            return Int8Array.of(value)[0];\n    }\n};\nexport const expectNonNull = (value, location) => {\n    if (value === null || value === undefined) {\n        if (location) {\n            throw new TypeError(`Expected a non-null value for ${location}`);\n        }\n        throw new TypeError(\"Expected a non-null value\");\n    }\n    return value;\n};\nexport const expectObject = (value) => {\n    if (value === null || value === undefined) {\n        return undefined;\n    }\n    if (typeof value === \"object\" && !Array.isArray(value)) {\n        return value;\n    }\n    const receivedType = Array.isArray(value) ? \"array\" : typeof value;\n    throw new TypeError(`Expected object, got ${receivedType}: ${value}`);\n};\nexport const expectString = (value) => {\n    if (value === null || value === undefined) {\n        return undefined;\n    }\n    if (typeof value === \"string\") {\n        return value;\n    }\n    if ([\"boolean\", \"number\", \"bigint\"].includes(typeof value)) {\n        logger.warn(stackTraceWarning(`Expected string, got ${typeof value}: ${value}`));\n        return String(value);\n    }\n    throw new TypeError(`Expected string, got ${typeof value}: ${value}`);\n};\nexport const expectUnion = (value) => {\n    if (value === null || value === undefined) {\n        return undefined;\n    }\n    const asObject = expectObject(value);\n    const setKeys = Object.entries(asObject)\n        .filter(([, v]) => v != null)\n        .map(([k]) => k);\n    if (setKeys.length === 0) {\n        throw new TypeError(`Unions must have exactly one non-null member. None were found.`);\n    }\n    if (setKeys.length > 1) {\n        throw new TypeError(`Unions must have exactly one non-null member. Keys ${setKeys} were not null.`);\n    }\n    return asObject;\n};\nexport const strictParseDouble = (value) => {\n    if (typeof value == \"string\") {\n        return expectNumber(parseNumber(value));\n    }\n    return expectNumber(value);\n};\nexport const strictParseFloat = strictParseDouble;\nexport const strictParseFloat32 = (value) => {\n    if (typeof value == \"string\") {\n        return expectFloat32(parseNumber(value));\n    }\n    return expectFloat32(value);\n};\nconst NUMBER_REGEX = /(-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?)|(-?Infinity)|(NaN)/g;\nconst parseNumber = (value) => {\n    const matches = value.match(NUMBER_REGEX);\n    if (matches === null || matches[0].length !== value.length) {\n        throw new TypeError(`Expected real number, got implicit NaN`);\n    }\n    return parseFloat(value);\n};\nexport const limitedParseDouble = (value) => {\n    if (typeof value == \"string\") {\n        return parseFloatString(value);\n    }\n    return expectNumber(value);\n};\nexport const handleFloat = limitedParseDouble;\nexport const limitedParseFloat = limitedParseDouble;\nexport const limitedParseFloat32 = (value) => {\n    if (typeof value == \"string\") {\n        return parseFloatString(value);\n    }\n    return expectFloat32(value);\n};\nconst parseFloatString = (value) => {\n    switch (value) {\n        case \"NaN\":\n            return NaN;\n        case \"Infinity\":\n            return Infinity;\n        case \"-Infinity\":\n            return -Infinity;\n        default:\n            throw new Error(`Unable to parse float value: ${value}`);\n    }\n};\nexport const strictParseLong = (value) => {\n    if (typeof value === \"string\") {\n        return expectLong(parseNumber(value));\n    }\n    return expectLong(value);\n};\nexport const strictParseInt = strictParseLong;\nexport const strictParseInt32 = (value) => {\n    if (typeof value === \"string\") {\n        return expectInt32(parseNumber(value));\n    }\n    return expectInt32(value);\n};\nexport const strictParseShort = (value) => {\n    if (typeof value === \"string\") {\n        return expectShort(parseNumber(value));\n    }\n    return expectShort(value);\n};\nexport const strictParseByte = (value) => {\n    if (typeof value === \"string\") {\n        return expectByte(parseNumber(value));\n    }\n    return expectByte(value);\n};\nconst stackTraceWarning = (message) => {\n    return String(new TypeError(message).stack || message)\n        .split(\"\\n\")\n        .slice(0, 5)\n        .filter((s) => !s.includes(\"stackTraceWarning\"))\n        .join(\"\\n\");\n};\nexport const logger = {\n    warn: console.warn,\n};\n","const SHORT_TO_HEX = {};\nconst HEX_TO_SHORT = {};\nfor (let i = 0; i < 256; i++) {\n    let encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = `0${encodedByte}`;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    const out = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < encoded.length; i += 2) {\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    let out = \"\";\n    for (let i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","import { HttpResponse } from \"@smithy/protocol-http\";\nimport { buildQueryString } from \"@smithy/querystring-builder\";\nimport { Agent as hAgent, request as hRequest } from \"http\";\nimport { Agent as hsAgent, request as hsRequest } from \"https\";\nimport { NODEJS_TIMEOUT_ERROR_CODES } from \"./constants\";\nimport { getTransformedHeaders } from \"./get-transformed-headers\";\nimport { setConnectionTimeout } from \"./set-connection-timeout\";\nimport { setSocketKeepAlive } from \"./set-socket-keep-alive\";\nimport { setSocketTimeout } from \"./set-socket-timeout\";\nimport { timing } from \"./timing\";\nimport { writeRequestBody } from \"./write-request-body\";\nexport const DEFAULT_REQUEST_TIMEOUT = 0;\nexport class NodeHttpHandler {\n    config;\n    configProvider;\n    socketWarningTimestamp = 0;\n    metadata = { handlerProtocol: \"http/1.1\" };\n    static create(instanceOrOptions) {\n        if (typeof instanceOrOptions?.handle === \"function\") {\n            return instanceOrOptions;\n        }\n        return new NodeHttpHandler(instanceOrOptions);\n    }\n    static checkSocketUsage(agent, socketWarningTimestamp, logger = console) {\n        const { sockets, requests, maxSockets } = agent;\n        if (typeof maxSockets !== \"number\" || maxSockets === Infinity) {\n            return socketWarningTimestamp;\n        }\n        const interval = 15_000;\n        if (Date.now() - interval < socketWarningTimestamp) {\n            return socketWarningTimestamp;\n        }\n        if (sockets && requests) {\n            for (const origin in sockets) {\n                const socketsInUse = sockets[origin]?.length ?? 0;\n                const requestsEnqueued = requests[origin]?.length ?? 0;\n                if (socketsInUse >= maxSockets && requestsEnqueued >= 2 * maxSockets) {\n                    logger?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${socketsInUse} and ${requestsEnqueued} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`);\n                    return Date.now();\n                }\n            }\n        }\n        return socketWarningTimestamp;\n    }\n    constructor(options) {\n        this.configProvider = new Promise((resolve, reject) => {\n            if (typeof options === \"function\") {\n                options()\n                    .then((_options) => {\n                    resolve(this.resolveDefaultConfig(_options));\n                })\n                    .catch(reject);\n            }\n            else {\n                resolve(this.resolveDefaultConfig(options));\n            }\n        });\n    }\n    resolveDefaultConfig(options) {\n        const { requestTimeout, connectionTimeout, socketTimeout, socketAcquisitionWarningTimeout, httpAgent, httpsAgent } = options || {};\n        const keepAlive = true;\n        const maxSockets = 50;\n        return {\n            connectionTimeout,\n            requestTimeout: requestTimeout ?? socketTimeout,\n            socketAcquisitionWarningTimeout,\n            httpAgent: (() => {\n                if (httpAgent instanceof hAgent || typeof httpAgent?.destroy === \"function\") {\n                    return httpAgent;\n                }\n                return new hAgent({ keepAlive, maxSockets, ...httpAgent });\n            })(),\n            httpsAgent: (() => {\n                if (httpsAgent instanceof hsAgent || typeof httpsAgent?.destroy === \"function\") {\n                    return httpsAgent;\n                }\n                return new hsAgent({ keepAlive, maxSockets, ...httpsAgent });\n            })(),\n            logger: console,\n        };\n    }\n    destroy() {\n        this.config?.httpAgent?.destroy();\n        this.config?.httpsAgent?.destroy();\n    }\n    async handle(request, { abortSignal, requestTimeout } = {}) {\n        if (!this.config) {\n            this.config = await this.configProvider;\n        }\n        return new Promise((_resolve, _reject) => {\n            let writeRequestBodyPromise = undefined;\n            const timeouts = [];\n            const resolve = async (arg) => {\n                await writeRequestBodyPromise;\n                timeouts.forEach(timing.clearTimeout);\n                _resolve(arg);\n            };\n            const reject = async (arg) => {\n                await writeRequestBodyPromise;\n                timeouts.forEach(timing.clearTimeout);\n                _reject(arg);\n            };\n            if (!this.config) {\n                throw new Error(\"Node HTTP request handler config is not resolved\");\n            }\n            if (abortSignal?.aborted) {\n                const abortError = new Error(\"Request aborted\");\n                abortError.name = \"AbortError\";\n                reject(abortError);\n                return;\n            }\n            const isSSL = request.protocol === \"https:\";\n            const agent = isSSL ? this.config.httpsAgent : this.config.httpAgent;\n            timeouts.push(timing.setTimeout(() => {\n                this.socketWarningTimestamp = NodeHttpHandler.checkSocketUsage(agent, this.socketWarningTimestamp, this.config.logger);\n            }, this.config.socketAcquisitionWarningTimeout ??\n                (this.config.requestTimeout ?? 2000) + (this.config.connectionTimeout ?? 1000)));\n            const queryString = buildQueryString(request.query || {});\n            let auth = undefined;\n            if (request.username != null || request.password != null) {\n                const username = request.username ?? \"\";\n                const password = request.password ?? \"\";\n                auth = `${username}:${password}`;\n            }\n            let path = request.path;\n            if (queryString) {\n                path += `?${queryString}`;\n            }\n            if (request.fragment) {\n                path += `#${request.fragment}`;\n            }\n            let hostname = request.hostname ?? \"\";\n            if (hostname[0] === \"[\" && hostname.endsWith(\"]\")) {\n                hostname = request.hostname.slice(1, -1);\n            }\n            else {\n                hostname = request.hostname;\n            }\n            const nodeHttpsOptions = {\n                headers: request.headers,\n                host: hostname,\n                method: request.method,\n                path,\n                port: request.port,\n                agent,\n                auth,\n            };\n            const requestFunc = isSSL ? hsRequest : hRequest;\n            const req = requestFunc(nodeHttpsOptions, (res) => {\n                const httpResponse = new HttpResponse({\n                    statusCode: res.statusCode || -1,\n                    reason: res.statusMessage,\n                    headers: getTransformedHeaders(res.headers),\n                    body: res,\n                });\n                resolve({ response: httpResponse });\n            });\n            req.on(\"error\", (err) => {\n                if (NODEJS_TIMEOUT_ERROR_CODES.includes(err.code)) {\n                    reject(Object.assign(err, { name: \"TimeoutError\" }));\n                }\n                else {\n                    reject(err);\n                }\n            });\n            if (abortSignal) {\n                const onAbort = () => {\n                    req.destroy();\n                    const abortError = new Error(\"Request aborted\");\n                    abortError.name = \"AbortError\";\n                    reject(abortError);\n                };\n                if (typeof abortSignal.addEventListener === \"function\") {\n                    const signal = abortSignal;\n                    signal.addEventListener(\"abort\", onAbort, { once: true });\n                    req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n                }\n                else {\n                    abortSignal.onabort = onAbort;\n                }\n            }\n            const effectiveRequestTimeout = requestTimeout ?? this.config.requestTimeout;\n            timeouts.push(setConnectionTimeout(req, reject, this.config.connectionTimeout));\n            timeouts.push(setSocketTimeout(req, reject, effectiveRequestTimeout));\n            const httpAgent = nodeHttpsOptions.agent;\n            if (typeof httpAgent === \"object\" && \"keepAlive\" in httpAgent) {\n                timeouts.push(setSocketKeepAlive(req, {\n                    keepAlive: httpAgent.keepAlive,\n                    keepAliveMsecs: httpAgent.keepAliveMsecs,\n                }));\n            }\n            writeRequestBodyPromise = writeRequestBody(req, request, effectiveRequestTimeout).catch((e) => {\n                timeouts.forEach(timing.clearTimeout);\n                return _reject(e);\n            });\n        });\n    }\n    updateHttpClientConfig(key, value) {\n        this.config = undefined;\n        this.configProvider = this.configProvider.then((config) => {\n            return {\n                ...config,\n                [key]: value,\n            };\n        });\n    }\n    httpHandlerConfigs() {\n        return this.config ?? {};\n    }\n}\n","export const escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n","import { escapeUri } from \"@smithy/util-uri-escape\";\nexport function buildQueryString(query) {\n    const parts = [];\n    for (let key of Object.keys(query).sort()) {\n        const value = query[key];\n        key = escapeUri(key);\n        if (Array.isArray(value)) {\n            for (let i = 0, iLen = value.length; i < iLen; i++) {\n                parts.push(`${key}=${escapeUri(value[i])}`);\n            }\n        }\n        else {\n            let qsEntry = key;\n            if (value || typeof value === \"string\") {\n                qsEntry += `=${escapeUri(value)}`;\n            }\n            parts.push(qsEntry);\n        }\n    }\n    return parts.join(\"&\");\n}\n","export const NODEJS_TIMEOUT_ERROR_CODES = [\"ECONNRESET\", \"EPIPE\", \"ETIMEDOUT\"];\n","const getTransformedHeaders = (headers) => {\n    const transformedHeaders = {};\n    for (const name of Object.keys(headers)) {\n        const headerValues = headers[name];\n        transformedHeaders[name] = Array.isArray(headerValues) ? headerValues.join(\",\") : headerValues;\n    }\n    return transformedHeaders;\n};\nexport { getTransformedHeaders };\n","export const timing = {\n    setTimeout: (cb, ms) => setTimeout(cb, ms),\n    clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n};\n","import { timing } from \"./timing\";\nconst DEFER_EVENT_LISTENER_TIME = 1000;\nexport const setConnectionTimeout = (request, reject, timeoutInMs = 0) => {\n    if (!timeoutInMs) {\n        return -1;\n    }\n    const registerTimeout = (offset) => {\n        const timeoutId = timing.setTimeout(() => {\n            request.destroy();\n            reject(Object.assign(new Error(`Socket timed out without establishing a connection within ${timeoutInMs} ms`), {\n                name: \"TimeoutError\",\n            }));\n        }, timeoutInMs - offset);\n        const doWithSocket = (socket) => {\n            if (socket?.connecting) {\n                socket.on(\"connect\", () => {\n                    timing.clearTimeout(timeoutId);\n                });\n            }\n            else {\n                timing.clearTimeout(timeoutId);\n            }\n        };\n        if (request.socket) {\n            doWithSocket(request.socket);\n        }\n        else {\n            request.on(\"socket\", doWithSocket);\n        }\n    };\n    if (timeoutInMs < 2000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return timing.setTimeout(registerTimeout.bind(null, DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n","import { timing } from \"./timing\";\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nexport const setSocketKeepAlive = (request, { keepAlive, keepAliveMsecs }, deferTimeMs = DEFER_EVENT_LISTENER_TIME) => {\n    if (keepAlive !== true) {\n        return -1;\n    }\n    const registerListener = () => {\n        if (request.socket) {\n            request.socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n        }\n        else {\n            request.on(\"socket\", (socket) => {\n                socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n            });\n        }\n    };\n    if (deferTimeMs === 0) {\n        registerListener();\n        return 0;\n    }\n    return timing.setTimeout(registerListener, deferTimeMs);\n};\n","import { DEFAULT_REQUEST_TIMEOUT } from \"./node-http-handler\";\nimport { timing } from \"./timing\";\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nexport const setSocketTimeout = (request, reject, timeoutInMs = DEFAULT_REQUEST_TIMEOUT) => {\n    const registerTimeout = (offset) => {\n        const timeout = timeoutInMs - offset;\n        const onTimeout = () => {\n            request.destroy();\n            reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: \"TimeoutError\" }));\n        };\n        if (request.socket) {\n            request.socket.setTimeout(timeout, onTimeout);\n            request.on(\"close\", () => request.socket?.removeListener(\"timeout\", onTimeout));\n        }\n        else {\n            request.setTimeout(timeout, onTimeout);\n        }\n    };\n    if (0 < timeoutInMs && timeoutInMs < 6000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return timing.setTimeout(registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n","import { Readable } from \"stream\";\nimport { timing } from \"./timing\";\nconst MIN_WAIT_TIME = 6_000;\nexport async function writeRequestBody(httpRequest, request, maxContinueTimeoutMs = MIN_WAIT_TIME) {\n    const headers = request.headers ?? {};\n    const expect = headers[\"Expect\"] || headers[\"expect\"];\n    let timeoutId = -1;\n    let sendBody = true;\n    if (expect === \"100-continue\") {\n        sendBody = await Promise.race([\n            new Promise((resolve) => {\n                timeoutId = Number(timing.setTimeout(() => resolve(true), Math.max(MIN_WAIT_TIME, maxContinueTimeoutMs)));\n            }),\n            new Promise((resolve) => {\n                httpRequest.on(\"continue\", () => {\n                    timing.clearTimeout(timeoutId);\n                    resolve(true);\n                });\n                httpRequest.on(\"response\", () => {\n                    timing.clearTimeout(timeoutId);\n                    resolve(false);\n                });\n                httpRequest.on(\"error\", () => {\n                    timing.clearTimeout(timeoutId);\n                    resolve(false);\n                });\n            }),\n        ]);\n    }\n    if (sendBody) {\n        writeBody(httpRequest, request.body);\n    }\n}\nfunction writeBody(httpRequest, body) {\n    if (body instanceof Readable) {\n        body.pipe(httpRequest);\n        return;\n    }\n    if (body) {\n        if (Buffer.isBuffer(body) || typeof body === \"string\") {\n            httpRequest.end(body);\n            return;\n        }\n        const uint8 = body;\n        if (typeof uint8 === \"object\" &&\n            uint8.buffer &&\n            typeof uint8.byteOffset === \"number\" &&\n            typeof uint8.byteLength === \"number\") {\n            httpRequest.end(Buffer.from(uint8.buffer, uint8.byteOffset, uint8.byteLength));\n            return;\n        }\n        httpRequest.end(Buffer.from(body));\n        return;\n    }\n    httpRequest.end();\n}\n","import { Writable } from \"stream\";\nexport class Collector extends Writable {\n    bufferedBytes = [];\n    _write(chunk, encoding, callback) {\n        this.bufferedBytes.push(chunk);\n        callback();\n    }\n}\n","import { Collector } from \"./collector\";\nexport const streamCollector = (stream) => {\n    if (isReadableStreamInstance(stream)) {\n        return collectReadableStream(stream);\n    }\n    return new Promise((resolve, reject) => {\n        const collector = new Collector();\n        stream.pipe(collector);\n        stream.on(\"error\", (err) => {\n            collector.end();\n            reject(err);\n        });\n        collector.on(\"error\", reject);\n        collector.on(\"finish\", function () {\n            const bytes = new Uint8Array(Buffer.concat(this.bufferedBytes));\n            resolve(bytes);\n        });\n    });\n};\nconst isReadableStreamInstance = (stream) => typeof ReadableStream === \"function\" && stream instanceof ReadableStream;\nasync function collectReadableStream(stream) {\n    const chunks = [];\n    const reader = stream.getReader();\n    let isDone = false;\n    let length = 0;\n    while (!isDone) {\n        const { done, value } = await reader.read();\n        if (value) {\n            chunks.push(value);\n            length += value.length;\n        }\n        isDone = done;\n    }\n    const collected = new Uint8Array(length);\n    let offset = 0;\n    for (const chunk of chunks) {\n        collected.set(chunk, offset);\n        offset += chunk.length;\n    }\n    return collected;\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}