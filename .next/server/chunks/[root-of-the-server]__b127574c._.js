module.exports=[24868,(e,r,t)=>{r.exports=e.x("fs/promises",()=>require("fs/promises"))},3667,e=>{"use strict";e.s([],60199),e.i(60199);var r=e.i(90771),t=e.i(84912),o=e.i(60400),a=e.i(24868),n=e.i(89073),s=e.i(19898),i=e.i(12764),l=e.i(47797),c=e.i(88947),d=e.i(49151);let f=async e=>"function"==typeof Blob&&e instanceof Blob||e.constructor?.name==="Blob"?void 0!==Blob.prototype.arrayBuffer?new Uint8Array(await e.arrayBuffer()):u(e):h(e);async function u(e){var r;let t=await (r=e,new Promise((e,t)=>{let o=new FileReader;o.onloadend=()=>{if(2!==o.readyState)return t(Error("Reader aborted too early"));let r=o.result??"",a=r.indexOf(","),n=a>-1?a+1:r.length;e(r.substring(n))},o.onabort=()=>t(Error("Read aborted")),o.onerror=()=>t(o.error),o.readAsDataURL(r)}));return new Uint8Array((0,d.fromBase64)(t))}async function h(e){let r=[],t=e.getReader(),o=!1,a=0;for(;!o;){let{done:e,value:n}=await t.read();n&&(r.push(n),a+=n.length),o=e}let n=new Uint8Array(a),s=0;for(let e of r)n.set(e,s),s+=e.length;return n}var p=e.i(71225),m=e.i(83784),w=e.i(25145);let y=e=>"function"==typeof ReadableStream&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),g="The stream has already been transformed.",b=e=>"function"==typeof Blob&&e instanceof Blob,T="The stream has already been transformed.";async function E(e,r){let t=(e=>{if(!(e instanceof c.Readable))try{if(!b(e)&&!y(e)){let r=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${r}`)}let r=!1,t=async()=>{if(r)throw Error(g);return r=!0,await f(e)};return Object.assign(e,{transformToByteArray:t,transformToString:async e=>{let r=await t();if("base64"===e)return(0,p.toBase64)(r);if("hex"===e)return(0,m.toHex)(r);if(void 0===e||"utf8"===e||"utf-8"===e)return(0,w.toUtf8)(r);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(r);throw Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(r)throw Error(g);if(r=!0,b(e)){if("function"!=typeof e.stream)throw Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()}if(y(e))return e;throw Error(`Cannot transform payload to web stream, got ${e}`)}})}catch(t){let r=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${r}`)}let r=!1,t=async()=>{if(r)throw Error(T);return r=!0,await (0,i.streamCollector)(e)};return Object.assign(e,{transformToByteArray:t,transformToString:async e=>{let r=await t();return void 0===e||Buffer.isEncoding(e)?(0,l.fromArrayBuffer)(r.buffer,r.byteOffset,r.byteLength).toString(e):new TextDecoder(e).decode(r)},transformToWebStream:()=>{if(r)throw Error(T);if(null!==e.readableFlowing)throw Error("The stream has been consumed by other callbacks.");if("function"!=typeof c.Readable.toWeb)throw Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return r=!0,c.Readable.toWeb(e)}})})(e.body),a=await t.transformToString();if(200===e.statusCode){let e=JSON.parse(a);if("string"!=typeof e.AccessKeyId||"string"!=typeof e.SecretAccessKey||"string"!=typeof e.Token||"string"!=typeof e.Expiration)throw new o.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:r});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,s.parseRfc3339DateTime)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let t={};try{t=JSON.parse(a)}catch(e){}throw Object.assign(new o.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:r}),{Code:t.Code,Message:t.Message})}throw new o.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:r})}e.s(["fromHttp",0,(e={})=>{let s,i,l,c;e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let d=e.awsContainerCredentialsRelativeUri??process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI,f=e.awsContainerCredentialsFullUri??process.env.AWS_CONTAINER_CREDENTIALS_FULL_URI,u=e.awsContainerAuthorizationToken??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,h=e.awsContainerAuthorizationTokenFile??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE,p=e.logger?.constructor?.name!=="NoOpLogger"&&e.logger?.warn?e.logger.warn.bind(e.logger):console.warn;if(d&&f&&(p("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),p("awsContainerCredentialsFullUri will take precedence.")),u&&h&&(p("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),p("awsContainerAuthorizationToken will take precedence.")),f)s=f;else if(d)s=`http://169.254.170.2${d}`;else throw new o.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let m=new URL(s);((e,r)=>{if("https:"!==e.protocol&&"169.254.170.2"!==e.hostname&&"169.254.170.23"!==e.hostname&&"[fd00:ec2::23]"!==e.hostname){if(e.hostname.includes("[")){if("[::1]"===e.hostname||"[0000:0000:0000:0000:0000:0000:0000:0001]"===e.hostname)return}else{if("localhost"===e.hostname)return;let r=e.hostname.split("."),t=e=>{let r=parseInt(e,10);return 0<=r&&r<=255};if("127"===r[0]&&t(r[1])&&t(r[2])&&t(r[3])&&4===r.length)return}throw new o.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:r})}})(m,e.logger);let w=t.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return i=async()=>{let t=new n.HttpRequest({protocol:m.protocol,hostname:m.hostname,port:Number(m.port),path:m.pathname,query:Array.from(m.searchParams.entries()).reduce((e,[r,t])=>(e[r]=t,e),{}),fragment:m.hash});u?t.headers.Authorization=u:h&&(t.headers.Authorization=(await a.default.readFile(h)).toString());try{let e=await w.handle(t);return E(e.response).then(e=>(0,r.setCredentialFeature)(e,"CREDENTIALS_HTTP","z"))}catch(r){throw new o.CredentialsProviderError(String(r),{logger:e.logger})}},l=e.maxRetries??3,c=e.timeout??1e3,async()=>{for(let e=0;e<l;++e)try{return await i()}catch(e){await new Promise(e=>setTimeout(e,c))}return await i()}}],3667)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b127574c._.js.map